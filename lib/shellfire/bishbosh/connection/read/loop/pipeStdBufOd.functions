core_usesIn bishbosh/connection/read/loop pipe

# Also exists on FreeBSD
# One can LD_PRELOAD libstdbuf, eg http://www.nxmnpg.com/3/libstdbuf
# A stripped down stdbuf to work with busybox https://www.mail-archive.com/debian-bugs-dist@lists.debian.org/msg1228432.html
# Or using gcc if present https://lists.gnu.org/archive/html/bug-coreutils/2008-11/msg00138.html
bishbosh_connection_read_loop_pipeStdbufOd_check()
{
	if core_compatibility_whichNoOutput stdbuf; then
		if core_compatibility_whichNoOutput od; then
			if od --version 2>&1 | grep -q '^od (GNU coreutils) '; then
				return 0
			fi
		fi
	fi
	return 1
}

bishbosh_connection_read_loop_pipeStdbufOd_initialise()
{
	_bishbosh_connection_read_loop_pipe_initialise
}

bishbosh_connection_read_loop_pipeStdbufOd()
{
	_bishbosh_connection_read_loop_pipe_stdbufGnuOd stdbuf od
}
