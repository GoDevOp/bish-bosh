bishbosh_connection_read_protocolError()
{
	local controlPacket="$1"
	local message="$2"core_message WARN "Connection:$bishbosh_connection_id:read:$controlPacket:$message"
	return $core_commandLine_exitCode_PROTOCOL
}

bishbosh_connection_read_protocolError_unknownPacketIdentifier()
{
	bishbosh_connection_read_protocolError "$1" "Unknown packet identifier '$packetIdentifier'"
}

bishbosh_connection_read_protocolError_ifRemainingLengthNot()
{
	local controlPacket="$1"
	local expectedLength=$2
	if [ $remainingLength -ne $expectedLength ]; then
		bishbosh_connection_read_protocolError "$controlPacket" "Remaining length '$remainingLength' should be $expectedLength"
	fi
}

bishbosh_connection_read_protocolError_ifRemainingLengthNotZero()
{
	bishbosh_connection_read_protocolError_ifRemainingLengthNot "$1" 0
}