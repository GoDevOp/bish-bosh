core_usesIn bishbosh/connection error
core_dependency_requires '*' mv touch
bishbosh_connection_read_controlpacket_PUBCOMP()
{
	bishbosh_connection_error_ifRemainingLengthNot PUBCOMP 2
	
	local packetIdentifier
	bishbosh_connection_read_packetIdentifier
	
	local pendingCompQoS2PacketIdentifierPath="$bishbosh_connection_sessionPublicationsQoS2PendingCompPath"/"$packetIdentifier"
	if [ -f "$pendingCompQoS2PacketIdentifierPath" ]; then
		unknownPacketIdentifier=0
	else
		unknownPacketIdentifier=1
	fi
	rm "$pendingCompQoS2PacketIdentifierPath"
	
	bishbosh_connection_handler_PUBCOMP
	
	core_TODO 'We should recycle the packet identifier at this point'
}
