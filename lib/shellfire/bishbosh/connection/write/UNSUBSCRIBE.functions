_bishbosh_connection_write_UNSUBSCRIBE_validateArguments()
{
	if [ $# -eq 0 ]; then
		core_exitError $core_commandLine_exitCode_CONFIG "The argument 'bishbosh_connection_write_UNSUBSCRIBE_topics' must contain at least one topic"
	fi
	
	local recordFile="$bishbosh_connection_sessionSubscriptionsUnsubscribingPath"/"$bishbosh_connection_packetIdentifier_forWriting"
	while [ $# -gt 0 ]
	do
		topicFilter="$1"
		bishbosh_connection_validate_topicFilter 'bishbosh_connection_write_UNSUBSCRIBE_topics' $index "$topicFilter"
		shift 1
	
		# We could also record the request as the actual packet, then cat it into the stream; potentially more efficient
		printf '%s' "${topicFilter}" >"$recordFile"
		
		topicFilterFieldLength=${#topicFilter}
		remainingLength=$(( remainingLength + 2 + topicFilterFieldLength ))
	done

	printf '' >"$recordFile".written
}

core_usesIn bishbosh/connection write
bishbosh_connection_write_UNSUBSCRIBE()
{

	REDO PACKET IDENTIFIER NEXT

	local remainingLength=2
	local topicFilter
	local topicFilterFieldLength
	_bishbosh_connection_write_UNSUBSCRIBE_validateArguments "$@"
	
	# 10 << 4 + 1 << 1 in octal
	printf '\242'
	bishbosh_connection_write_remainingLength $remainingLength
	bishbosh_connection_packetIdentifier_write
	
	while [ $# -gt 0 ]
	do
		topicFilter="$1"

		bishbosh_connection_write_twoByteLength ${#topicFilter}
		printf '%s' "$topicFilter"
	done
	
	bishbosh_connection_ping_recordLastSentControlPacketAt
}
